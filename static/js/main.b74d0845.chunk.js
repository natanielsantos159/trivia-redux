(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},32:function(e,t,a){e.exports=a.p+"static/media/star-solid.2caa74cf.svg"},33:function(e,t,a){e.exports=a.p+"static/media/star-solid-black.83dae189.svg"},35:function(e,t,a){e.exports=a(61)},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},51:function(e,t){},52:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),c=a.n(i),o=a(15),s=a(13),l=a(20),u=a(28),m=a(29),d=a(14),p=a(12),h=a.n(p),f=a(16),v=function(e){return{type:"SET_TRIVIA_VALUE",payload:e}},y=function(e){return{type:"FAILED_REQUEST",payload:e}},g=function(){return function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=n.token,localStorage.setItem("token",r),e.abrupt("return",t({type:"SET_TOKEN_VALUE",payload:r}));case 12:e.prev=12,e.t0=e.catch(0),t(y(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},b={amount:5,difficulty:"easy",category:"any",type:"multiple"},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,i,c,o,s,l,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.amount,r=e.difficulty,i=e.category,c=e.type,o=localStorage,s=o.token,t.next=5,fetch("https://opentdb.com/api.php?amount=".concat(n,"&token=").concat(s,"&difficulty=").concat(r,"&type=").concat(c,"&").concat("any"!==i&&"&category=".concat(i)));case 5:return l=t.sent,t.next=8,l.json();case 8:return u=t.sent,t.abrupt("return",a(v(u)));case 12:t.prev=12,t.t0=t.catch(0),a(y(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},k={email:"",name:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGIN_VALUE":return Object(d.a)(Object(d.a)({},e),t.payload);default:return e}},j={triviaReturn:{}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRIVIA_VALUE":return Object(d.a)(Object(d.a)({},e),{},{triviaReturn:t.payload});default:return e}},w={token:""},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN_VALUE":return Object(d.a)(Object(d.a)({},e),{},{token:t.payload});default:return e}},S=Object(l.combineReducers)({loginReducer:O,gameReducer:C,tokenReducer:N}),I=Object(l.createStore)(S,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));window.Cypress&&(window.store=I);var A=I,T=(a(46),a(2)),x=(a(47),a(18)),R=a(4),U=a(5),P=a(3),q=a(7),L=a(6),_=(a(48),a(19)),F=a.n(_),M=function(e){Object(q.a)(a,e);var t=Object(L.a)(a);function a(){var e;return Object(R.a)(this,a),(e=t.call(this)).state={email:"",name:""},e.handleChange=e.handleChange.bind(Object(P.a)(e)),e.toLogin=e.toLogin.bind(Object(P.a)(e)),e}return Object(U.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(x.a)({},a,n))}},{key:"toLogin",value:function(){var e=this.props,t=e.history,a=e.setUser,n=this.state,r=n.email,i=n.name;a({email:r,name:i}),localStorage.setItem("trivia-user",JSON.stringify({email:r,name:i})),t.push("/newgame")}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"login-trivia-logo",src:F.a,alt:"Trivia Logo"}),r.a.createElement("section",{className:"login-section"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"emailInput"},"E-mail:",r.a.createElement("input",{id:"emailInput",name:"email",type:"email","data-testid":"input-gravatar-email",onChange:this.handleChange,value:t})),r.a.createElement("label",{htmlFor:"nameInput"},"Name:",r.a.createElement("input",{id:"nameInput",name:"name",type:"text","data-testid":"input-player-name",onChange:this.handleChange,value:a})),r.a.createElement("button",{type:"button","data-testid":"btn-play",className:"btn-play",disabled:!(a&&t),onClick:this.toLogin},"Entrar"))))}}]),a}(n.Component),V=Object(s.b)((function(e){return{token:e.tokenReducer.token}}),(function(e){return{setUser:function(t){return e({type:"SET_LOGIN_VALUE",payload:t})}}}))(M),G=a(34),J=(a(49),a(30)),Q=a.n(J),D=(a(52),function(e){Object(q.a)(a,e);var t=Object(L.a)(a);function a(){var e;return Object(R.a)(this,a),(e=t.call(this)).state={picture:"",email:"",name:""},e.getGravatarPicture=e.getGravatarPicture.bind(Object(P.a)(e)),e.getUserInfo=e.getUserInfo.bind(Object(P.a)(e)),e}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"getUserInfo",value:function(){var e=JSON.parse(localStorage.getItem("trivia-user"))||{},t=e.email,a=e.name;if(t&&a)this.setState({email:t,name:a},this.getGravatarPicture);else{var n=this.props,r=n.email,i=n.name;this.setState({email:r,name:i},this.getGravatarPicture)}}},{key:"getGravatarPicture",value:function(){var e=this.state.email,t=Q()(e).toString(),a="https://www.gravatar.com/avatar/".concat(t);this.setState({picture:a})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.picture,n=this.props.score;return r.a.createElement("section",{className:"top-container"},r.a.createElement(o.b,{to:"/"},r.a.createElement("img",{className:"trivia-logo",src:F.a,alt:"Trivia Logo"})),r.a.createElement("header",null,r.a.createElement("div",{className:"user-info"},r.a.createElement("img",{"data-testid":"header-profile-picture",className:"header-profile-picture",src:a,alt:"profile"}),r.a.createElement("span",{className:"player-name"},"Jogador:"," ",r.a.createElement("span",{"data-testid":"header-player-name"},t))),r.a.createElement("span",{className:"player-score"},"Pontos:"," ",r.a.createElement("span",{"data-testid":"header-score"},n))))}}]),a}(n.Component)),B=Object(s.b)((function(e){return{name:e.loginReducer.name,email:e.loginReducer.email}}))(D),W=function(e){Object(q.a)(a,e);var t=Object(L.a)(a);function a(){return Object(R.a)(this,a),t.apply(this,arguments)}return Object(U.a)(a,[{key:"encodeUtf8",value:function(e){return unescape(encodeURIComponent(e)).replace(/&quot;|&#039;/gi,"'")}},{key:"render",value:function(){var e=this.props.results;return r.a.createElement("section",{className:"question-card"},r.a.createElement("section",{className:"category-section"},r.a.createElement("span",{"data-testid":"question-category"},e?"Category: ".concat(e.category," "):"Category: ")),r.a.createElement("br",null),r.a.createElement("div",{"data-testid":"question-text",className:"question-text"},e?"Question: ".concat(this.encodeUtf8(e.question)," "):"Question: "),r.a.createElement("br",null))}}]),a}(n.Component);W.defaultProps={results:void 0};a(56),a(57);var K=function(e){Object(q.a)(a,e);var t=Object(L.a)(a);function a(){return Object(R.a)(this,a),t.apply(this,arguments)}return Object(U.a)(a,[{key:"encodeUtf8",value:function(e){return unescape(encodeURIComponent(e)).replace(/&quot;|&#039;/gi,"'")}},{key:"render",value:function(){var e=this,t=this.props,a=t.onClick,n=t.answers,i=t.disabled,c=t.clicked;return r.a.createElement("section",{className:"answers-container"},n.map((function(t,n){var o=t.answer,s=t.correct;return r.a.createElement("button",{type:"button","data-testid":s?"correct-answer":"wrong-answer-".concat(n),className:"answer ".concat(s?"correct":"incorrect"," ").concat(c&&"clicked"),key:n,onClick:a,disabled:i},e.encodeUtf8(o))})))}}]),a}(n.Component);K.defaultProps={answers:[]};var H=function(e){Object(q.a)(a,e);var t=Object(L.a)(a);function a(e){var n;Object(R.a)(this,a),n=t.call(this,e);var r=e.email,i=e.name;return n.state={answers:[],counter:0,timer:30,state:{player:{name:i,assertions:0,score:0,gravatarEmail:r}},clicked:!1},n.gameTimer=null,n.handleCounter=n.handleCounter.bind(Object(P.a)(n)),n.shuffleArray=n.shuffleArray.bind(Object(P.a)(n)),n.getAnswers=n.getAnswers.bind(Object(P.a)(n)),n.handleQuestionTimer=n.handleQuestionTimer.bind(Object(P.a)(n)),n.handleAnswerClick=n.handleAnswerClick.bind(Object(P.a)(n)),n.handleCorrectChange=n.handleCorrectChange.bind(Object(P.a)(n)),n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.tokenAPI,a=e.triviaApi,n=e.triviaReturn,r=this.state.state;n.results?this.getAnswers():t().then((function(){return a()})).then(this.getAnswers),this.handleQuestionTimer(),localStorage.setItem("state",JSON.stringify(r))}},{key:"componentDidUpdate",value:function(){var e=this.state.state;localStorage.setItem("state",JSON.stringify(e))}},{key:"componentWillUnmount",value:function(){var e=this.state.timer;clearInterval(e)}},{key:"getAnswers",value:function(){var e=this,t=this.props.triviaReturn.results.reduce((function(t,a){var n=a.incorrect_answers.map((function(e){return{answer:e,correct:!1}})),r=[{answer:a.correct_answer,correct:!0}].concat(Object(G.a)(n)),i=e.shuffleArray(r);return t.push(i),t}),[]);this.setState({answers:t})}},{key:"shuffleArray",value:function(e){for(var t,a=e.length;0!==a;){t=Math.floor(Math.random()*a),a-=1;var n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}return e}},{key:"handleQuestionTimer",value:function(){var e=this,t=31;return this.gameTimer=setInterval((function(){t>0&&(t-=1,e.setState({timer:t}))}),1e3),t}},{key:"handleCorrectChange",value:function(){var e=this.state,t=e.timer,a=e.counter,n=this.props,r=n.triviaReturn.results,i=n.email,c=n.name,o=0;if("easy"===r[a].difficulty&&(o=1),"medium"===r[a].difficulty&&(o=2),"hard"===r[a].difficulty){o=3}this.setState((function(e){return{state:{player:{name:c,assertions:e.state.player.assertions+1,score:e.state.player.score+(10+t*o),gravatarEmail:i}}}}))}},{key:"handleAnswerClick",value:function(e){var t=e.target;this.state.clicked||(this.setState({clicked:!0}),clearInterval(this.gameTimer)),t.classList.contains("correct")&&this.handleCorrectChange()}},{key:"handleCounter",value:function(){var e=this.state.counter,t=this.props.history,a=document.querySelector(".question-card"),n=document.querySelector(".answers-container");4===e&&t.push("/feedback"),a.style.display="none",n.style.display="none",this.setState((function(e){return{counter:e.counter+1,clicked:!1}})),clearInterval(this.gameTimer),this.handleQuestionTimer(),setTimeout((function(){a.style.display="block",n.style.display="flex"}),100)}},{key:"render",value:function(){var e=this.state,t=e.counter,a=e.timer,n=e.answers,i=e.state,c=e.clicked,o=this.props.triviaReturn.results;return r.a.createElement("section",null,r.a.createElement(B,{score:i.player.score}),r.a.createElement("section",{className:"content-container"},r.a.createElement(W,{results:o?o[t]:{}}),r.a.createElement(K,{clicked:c,answers:n[t],disabled:0===a||c,onClick:this.handleAnswerClick})),r.a.createElement("section",{className:"bottom-container"},r.a.createElement("div",{className:"timer-container"},o&&r.a.createElement("progress",{className:"game-process",value:a,max:30}),"Tempo restante: ".concat(a,a<=1?" segundo":" segundos")),r.a.createElement("button",{type:"button",className:"next-question-btn ".concat((0===a||c)&&"visible"),"data-testid":"btn-next",onClick:this.handleCounter},"Pr\xf3xima")))}}]),a}(n.Component),$=Object(s.b)((function(e){return{triviaReturn:e.gameReducer.triviaReturn,email:e.loginReducer.email,name:e.loginReducer.name}}),(function(e){return{tokenAPI:function(){return e(g())},triviaApi:function(){var t=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,E();case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}))(H),z=(a(58),a(32)),X=a.n(z),Y=a(33),Z=a.n(Y),ee=(a(59),function(e){Object(q.a)(a,e);var t=Object(L.a)(a);function a(){return Object(R.a)(this,a),t.apply(this,arguments)}return Object(U.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.children;return r.a.createElement("div",{className:"card-container"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h2",null,t)),r.a.createElement("div",{className:"card-body"},a))}}]),a}(n.Component)),te=function(e){Object(q.a)(a,e);var t=Object(L.a)(a);function a(){var e;return Object(R.a)(this,a),(e=t.call(this)).state={state:{player:{assertions:0,score:0}}},e.getState=e.getState.bind(Object(P.a)(e)),e}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.getState()}},{key:"getState",value:function(){var e=JSON.parse(localStorage.getItem("state"));this.setState({state:e})}},{key:"render",value:function(){var e=this.state.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{score:e.player.score}),r.a.createElement(ee,{title:"Resultado"},r.a.createElement("span",{className:"feedback-total-score"},e.player.score),r.a.createElement("div",{className:"stars"},new Array(5).fill(r.a.createElement("img",{src:X.a,alt:"Star Icon",className:"star"}),0,e.player.assertions).fill(r.a.createElement("img",{src:Z.a,alt:"Star Icon Black",className:"star"}),e.player.assertions)),e.player.assertions>0?r.a.createElement("p",null,"Voc\xea acertou",r.a.createElement("span",{className:"feedback-total-question"}," ".concat(e.player.assertions," ")),e.player.assertions>1?"perguntas":"pergunta"):"Voc\xea n\xe3o acertou nenhuma quest\xe3o :(",r.a.createElement("p",{className:"feedback-text"},e.player.assertions>=3?"Mandou bem! \ud83c\udf89":"Podia ser melhor..."),r.a.createElement(o.b,{to:"/game"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again",className:"btn-play"},"Play again!"))))}}]),a}(n.Component),ae=[{id:9,name:"General Knowledge"},{id:10,name:"Entertainment: Books"},{id:11,name:"Entertainment: Film"},{id:12,name:"Entertainment: Music"},{id:13,name:"Entertainment: Musicals &a Theatres"},{id:14,name:"Entertainment: Television"},{id:15,name:"Entertainment: Video Games"},{id:16,name:"Entertainment: Board Games"},{id:17,name:"Science & Nature"},{id:18,name:"Science: Computers"},{id:19,name:"Science: Mathematics"},{id:20,name:"Mythology"},{id:21,name:"Sports"},{id:22,name:"Geography"},{id:23,name:"History"},{id:24,name:"Politics"},{id:25,name:"Art"},{id:26,name:"Celebrities"},{id:27,name:"Animals"},{id:28,name:"Vehicles"},{id:29,name:"Entertainment: Comics"},{id:30,name:"Science: Gadgets"},{id:31,name:"Entertainment: Japanese Anime & Manga"},{id:32,name:"Entertainment: Cartoon & Animations"}],ne=(a(60),function(e){Object(q.a)(a,e);var t=Object(L.a)(a);function a(){var e;return Object(R.a)(this,a),(e=t.call(this)).state={amount:5,difficulty:"easy",category:"any",type:"multiple"},e.handleChange=e.handleChange.bind(Object(P.a)(e)),e.toPlay=e.toPlay.bind(Object(P.a)(e)),e}return Object(U.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(x.a)({},a,n))}},{key:"toPlay",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,i,c,o,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.amount,n=t.difficulty,r=t.category,i=t.type,c=this.props,o=c.triviaApi,s=c.tokenAPI,l=c.history,e.next=4,s();case 4:return e.next=6,o({amount:a,difficulty:n,category:r,type:i});case 6:l.push("/game");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.amount,a=e.difficulty,n=e.category,i=e.type;return r.a.createElement("main",null,r.a.createElement("section",{className:"top-container"},r.a.createElement("img",{className:"trivia-logo",src:F.a,alt:"Trivia Logo"})),r.a.createElement("section",{className:"content-container new-game-page"},r.a.createElement(ee,{title:"Novo jogo"},r.a.createElement("label",{htmlFor:"amount"},"Numero de quest\xf5es:",r.a.createElement("select",{id:"question-amount",name:"amount",value:t,onChange:this.handleChange},r.a.createElement("option",{value:5},"5"),r.a.createElement("option",{value:10},"10"),r.a.createElement("option",{value:15},"15"))),r.a.createElement("label",{htmlFor:"difficulty"},"Dificuldade:",r.a.createElement("select",{id:"difficulty",name:"difficulty",onChange:this.handleChange,value:a},r.a.createElement("option",{value:"easy"},"F\xe1cil"),r.a.createElement("option",{value:"medium"},"Intermedi\xe1rio"),r.a.createElement("option",{value:"hard"},"Dif\xedcil"))),r.a.createElement("label",{htmlFor:"category"},"Categoria:",r.a.createElement("select",{name:"category",id:"category",onChange:this.handleChange,value:n},r.a.createElement("option",{value:"any"},"Qualquer Categoria"),ae.map((function(e){var t=e.id,a=e.name;return r.a.createElement("option",{value:t,key:t},a)})))),r.a.createElement("label",{htmlFor:"type",name:"type"},r.a.createElement("span",null,"Tipo:"),r.a.createElement("label",{htmlFor:"multiple-choice",onChange:this.handleChange},"M\xfaltipla Escolha",r.a.createElement("input",{id:"multiple-choice",type:"radio",value:"multiple",name:"type",checked:"multiple"===i})),r.a.createElement("label",{htmlFor:"true-false",onChange:this.handleChange},"Verdadeiro ou Falso",r.a.createElement("input",{id:"true-false",type:"radio",value:"boolean",name:"type",checked:"boolean"===i}))),r.a.createElement("button",{className:"btn-play",onClick:this.toPlay},"Jogar!"))))}}]),a}(n.Component)),re=Object(s.b)((function(e){return{token:e.tokenReducer.token}}),(function(e){return{tokenAPI:function(){return e(g())},triviaApi:function(t){return e(E(t))}}}))(ne);function ie(){return r.a.createElement(T.d,null,r.a.createElement(T.b,{exact:!0,path:"/",render:function(e){return null!==localStorage.getItem("trivia-user")?r.a.createElement(T.a,{to:"/newgame"}):r.a.createElement(V,e)}}),r.a.createElement(T.b,{path:"/newgame",component:re}),r.a.createElement(T.b,{path:"/game",component:$}),r.a.createElement(T.b,{path:"/feedback",component:te}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{basename:"trivia-redux"},r.a.createElement(s.a,{store:A},r.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.b74d0845.chunk.js.map