(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},32:function(e,t,a){e.exports=a.p+"static/media/star-solid.2caa74cf.svg"},33:function(e,t,a){e.exports=a.p+"static/media/star-solid-black.83dae189.svg"},35:function(e,t,a){e.exports=a(58)},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},51:function(e,t){},52:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),i=a(15),o=a(13),l=a(17),u=a(28),m=a(29),p=a(12),d=a(14),h=a.n(d),f=a(19),v=function(e){return{type:"FAILED_REQUEST",payload:e}},b={email:"",name:""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGIN_VALUE":return Object(p.a)(Object(p.a)({},e),t.payload);default:return e}},g={triviaReturn:{}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRIVIA_VALUE":return Object(p.a)(Object(p.a)({},e),{},{triviaReturn:t.payload});default:return e}},k={token:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN_VALUE":return Object(p.a)(Object(p.a)({},e),{},{token:t.payload});default:return e}},j=Object(l.combineReducers)({loginReducer:y,gameReducer:E,tokenReducer:O}),w=Object(l.createStore)(j,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));window.Cypress&&(window.store=w);var C=w,N=(a(46),a(2)),S=(a(47),a(21)),A=a(8),I=a(9),T=a(3),R=a(11),x=a(10),U=(a(48),a(22)),P=a.n(U),_=function(e){Object(R.a)(a,e);var t=Object(x.a)(a);function a(){var e;return Object(A.a)(this,a),(e=t.call(this)).state={email:"",name:""},e.handleChange=e.handleChange.bind(Object(T.a)(e)),e.toPlay=e.toPlay.bind(Object(T.a)(e)),e}return Object(I.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(S.a)({},a,n))}},{key:"toPlay",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.tokenAPI,n=t.history,r=t.setUser,c=this.state,s=c.email,i=c.name,e.next=4,a();case 4:r({email:s,name:i}),n.push("/game");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"login-trivia-logo",src:P.a,alt:"Trivia Logo"}),r.a.createElement("section",{className:"login-section"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"emailInput"},"E-mail:",r.a.createElement("input",{id:"emailInput",name:"email",type:"email","data-testid":"input-gravatar-email",onChange:this.handleChange,value:t})),r.a.createElement("label",{htmlFor:"nameInput"},"Name:",r.a.createElement("input",{id:"nameInput",name:"name",type:"text","data-testid":"input-player-name",onChange:this.handleChange,value:a})),r.a.createElement("button",{type:"button","data-testid":"btn-play",className:"btn-play",disabled:!(a&&t),onClick:this.toPlay},"Jogar"))))}}]),a}(n.Component),q=Object(o.b)((function(e){return{token:e.tokenReducer.token}}),(function(e){return{tokenAPI:function(){return e(function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=n.token,localStorage.setItem("token",r),e.abrupt("return",t({type:"SET_TOKEN_VALUE",payload:r}));case 12:e.prev=12,e.t0=e.catch(0),t(v(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())},setUser:function(t){return e({type:"SET_LOGIN_VALUE",payload:t})}}}))(_),L=a(34),V=(a(49),a(30)),Q=a.n(V),J=(a(52),function(e){Object(R.a)(a,e);var t=Object(x.a)(a);function a(){var e;return Object(A.a)(this,a),(e=t.call(this)).state={picture:""},e.getGravatarPicture=e.getGravatarPicture.bind(Object(T.a)(e)),e}return Object(I.a)(a,[{key:"componentDidMount",value:function(){this.getGravatarPicture()}},{key:"getGravatarPicture",value:function(){var e=this.props.email,t=Q()(e).toString(),a="https://www.gravatar.com/avatar/".concat(t);this.setState({picture:a})}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=this.state.picture;return r.a.createElement("section",{className:"top-container"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{className:"trivia-logo",src:P.a,alt:"Trivia Logo"})),r.a.createElement("header",null,r.a.createElement("div",{className:"user-info"},r.a.createElement("img",{"data-testid":"header-profile-picture",className:"header-profile-picture",src:n,alt:"profile"}),r.a.createElement("span",{className:"player-name"},"Jogador:"," ",r.a.createElement("span",{"data-testid":"header-player-name"},t))),r.a.createElement("span",{className:"player-score"},"Pontos:"," ",r.a.createElement("span",{"data-testid":"header-score"},a))))}}]),a}(n.Component)),M=Object(o.b)((function(e){return{name:e.loginReducer.name,email:e.loginReducer.email}}))(J),D=function(e){Object(R.a)(a,e);var t=Object(x.a)(a);function a(){return Object(A.a)(this,a),t.apply(this,arguments)}return Object(I.a)(a,[{key:"encodeUtf8",value:function(e){return unescape(encodeURIComponent(e)).replace(/&quot;|&#039;/gi,"'")}},{key:"render",value:function(){var e=this.props.results;return r.a.createElement("section",{className:"question-card"},r.a.createElement("section",{className:"category-section"},r.a.createElement("span",{"data-testid":"question-category"},e?"Category: ".concat(e.category," "):"Category: ")),r.a.createElement("br",null),r.a.createElement("div",{"data-testid":"question-text",className:"question-text"},e?"Question: ".concat(this.encodeUtf8(e.question)," "):"Question: "),r.a.createElement("br",null))}}]),a}(n.Component);D.defaultProps={results:void 0};a(56);var G=function(e){Object(R.a)(a,e);var t=Object(x.a)(a);function a(){return Object(A.a)(this,a),t.apply(this,arguments)}return Object(I.a)(a,[{key:"encodeUtf8",value:function(e){return unescape(encodeURIComponent(e)).replace(/&quot;|&#039;/gi,"'")}},{key:"render",value:function(){var e=this,t=this.props,a=t.onClick,n=t.answers,c=t.disabled,s=t.clicked;return r.a.createElement("section",{className:"answers-container"},n.map((function(t,n){var i=t.answer,o=t.correct;return r.a.createElement("button",{type:"button","data-testid":o?"correct-answer":"wrong-answer-".concat(n),className:"answer ".concat(o?"correct":"incorrect"," ").concat(s&&"clicked"),key:n,onClick:a,disabled:c},e.encodeUtf8(i))})))}}]),a}(n.Component);G.defaultProps={answers:[]};var F=function(e){Object(R.a)(a,e);var t=Object(x.a)(a);function a(e){var n;Object(A.a)(this,a),n=t.call(this,e);var r=e.email,c=e.name;return n.state={answers:[],counter:0,timer:30,state:{player:{name:c,assertions:0,score:0,gravatarEmail:r}},clicked:!1},n.gameTimer=null,n.handleCounter=n.handleCounter.bind(Object(T.a)(n)),n.shuffleArray=n.shuffleArray.bind(Object(T.a)(n)),n.getAnswers=n.getAnswers.bind(Object(T.a)(n)),n.handleQuestionTimer=n.handleQuestionTimer.bind(Object(T.a)(n)),n.handleAnswerClick=n.handleAnswerClick.bind(Object(T.a)(n)),n.handleCorrectChange=n.handleCorrectChange.bind(Object(T.a)(n)),n}return Object(I.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.triviaApi,a=this.state.state;t().then((function(){return e.getAnswers()})),this.handleQuestionTimer(),localStorage.setItem("state",JSON.stringify(a))}},{key:"componentDidUpdate",value:function(){var e=this.state.state;localStorage.setItem("state",JSON.stringify(e))}},{key:"componentWillUnmount",value:function(){var e=this.state.timer;clearInterval(e)}},{key:"getAnswers",value:function(){var e=this,t=this.props.triviaReturn.results.reduce((function(t,a){var n=a.incorrect_answers.map((function(e){return{answer:e,correct:!1}})),r=[{answer:a.correct_answer,correct:!0}].concat(Object(L.a)(n)),c=e.shuffleArray(r);return t.push(c),t}),[]);this.setState({answers:t})}},{key:"shuffleArray",value:function(e){for(var t,a=e.length;0!==a;){t=Math.floor(Math.random()*a),a-=1;var n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}return e}},{key:"handleQuestionTimer",value:function(){var e=this,t=31;return this.gameTimer=setInterval((function(){t>0&&(t-=1,e.setState({timer:t}))}),1e3),t}},{key:"handleCorrectChange",value:function(){var e=this.state,t=e.timer,a=e.counter,n=this.props,r=n.triviaReturn.results,c=n.email,s=n.name,i=0;if("easy"===r[a].difficulty&&(i=1),"medium"===r[a].difficulty&&(i=2),"hard"===r[a].difficulty){i=3}this.setState((function(e){return{state:{player:{name:s,assertions:e.state.player.assertions+1,score:e.state.player.score+(10+t*i),gravatarEmail:c}}}}))}},{key:"handleAnswerClick",value:function(e){var t=e.target;this.state.clicked||this.setState({clicked:!0}),t.classList.contains("correct")&&this.handleCorrectChange()}},{key:"handleCounter",value:function(){var e=this.state.counter,t=this.props.history,a=document.querySelector(".question-card"),n=document.querySelector(".answers-container");4===e&&t.push("/feedback"),a.style.display="none",n.style.display="none",this.setState((function(e){return{counter:e.counter+1,clicked:!1}})),clearInterval(this.gameTimer),this.handleQuestionTimer(),setTimeout((function(){a.style.display="block",n.style.display="flex"}),100)}},{key:"render",value:function(){var e=this.state,t=e.counter,a=e.timer,n=e.answers,c=e.state,s=e.clicked,i=this.props.triviaReturn.results;return r.a.createElement("section",null,r.a.createElement(M,{score:c.player.score}),r.a.createElement("section",{className:"content-container"},r.a.createElement(D,{results:i?i[t]:{}}),r.a.createElement(G,{clicked:s,answers:n[t],disabled:0===a,onClick:this.handleAnswerClick})),r.a.createElement("section",{className:"bottom-container"},r.a.createElement("span",{className:"timer-container"},"Tempo restante: ".concat(a,a<=1?" segundo":" segundos")),r.a.createElement("button",{type:"button",className:"next-question-btn ".concat((0===a||s)&&"visible"),"data-testid":"btn-next",onClick:this.handleCounter},"Pr\xf3xima")))}}]),a}(n.Component),W=Object(o.b)((function(e){return{triviaReturn:e.gameReducer.triviaReturn,email:e.loginReducer.email,name:e.loginReducer.name}}),(function(e){return{triviaApi:function(){return e(function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage,n=a.token,e.next=4,fetch("https://opentdb.com/api.php?amount=5&token=".concat(n));case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",t({type:"SET_TRIVIA_VALUE",payload:c}));case 11:e.prev=11,e.t0=e.catch(0),t(v(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}}}))(F),B=(a(57),a(32)),K=a.n(B),$=a(33),z=a.n($),H=function(e){Object(R.a)(a,e);var t=Object(x.a)(a);function a(){var e;return Object(A.a)(this,a),(e=t.call(this)).state={state:{player:{assertions:0,score:0}}},e.getState=e.getState.bind(Object(T.a)(e)),e}return Object(I.a)(a,[{key:"componentDidMount",value:function(){this.getState()}},{key:"getState",value:function(){var e=JSON.parse(localStorage.getItem("state"));this.setState({state:e})}},{key:"render",value:function(){var e=this.state.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{score:e.player.score}),r.a.createElement("div",{className:"feedback-container"},r.a.createElement("div",{className:"result-header"},r.a.createElement("p",null,"Resultado")),r.a.createElement("div",{className:"result-body"},r.a.createElement("span",{className:"feedback-total-score"},e.player.score),r.a.createElement("div",{className:"stars"},new Array(5).fill(r.a.createElement("img",{src:K.a,alt:"Star Icon",className:"star"}),0,e.player.assertions).fill(r.a.createElement("img",{src:z.a,alt:"Star Icon Black",className:"star"}),e.player.assertions)),e.player.assertions>0?r.a.createElement("p",null,"Voc\xea acertou",r.a.createElement("span",{className:"feedback-total-question"}," ".concat(e.player.assertions," ")),e.player.assertions>1?"perguntas":"pergunta"):"Voc\xea n\xe3o acertou nenhuma quest\xe3o :(",r.a.createElement("p",{className:"feedback-text"},e.player.assertions>=3?"Mandou bem! \ud83c\udf89":"Podia ser melhor...")),r.a.createElement(i.b,{to:"/game"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again",className:"btn-play"},"Play again!"))))}}]),a}(n.Component);function X(){return r.a.createElement(N.c,null,r.a.createElement(N.a,{exact:!0,path:"/",component:q}),r.a.createElement(N.a,{path:"/game",component:W}),r.a.createElement(N.a,{path:"/feedback",component:H}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,{basename:"trivia-redux"},r.a.createElement(o.a,{store:C},r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.ad2fad32.chunk.js.map