(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},31:function(e,t,a){e.exports=a.p+"static/media/sliders-h-solid (1).b5adcc53.svg"},34:function(e,t,a){e.exports=a(57)},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},51:function(e,t,a){},53:function(e,t){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),i=a(13),o=a(15),l=a(18),u=a(29),m=a(30),d=a(14),p=a(12),h=a.n(p),f=a(16),v=function(e){return{type:"FAILED_REQUEST",payload:e}},b={email:"",name:""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGIN_VALUE":return Object(d.a)(Object(d.a)({},e),t.payload);default:return e}},g={triviaReturn:{}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRIVIA_VALUE":return Object(d.a)(Object(d.a)({},e),{},{triviaReturn:t.payload});default:return e}},O={token:""},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN_VALUE":return Object(d.a)(Object(d.a)({},e),{},{token:t.payload});default:return e}},k=Object(l.combineReducers)({loginReducer:y,gameReducer:E,tokenReducer:j}),w=Object(l.createStore)(k,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));window.Cypress&&(window.store=w);var C=w,S=(a(45),a(2)),N=(a(46),a(21)),A=a(3),x=a(4),T=a(7),I=a(6),R=a(5),q=(a(47),a(22)),P=a.n(q),L=a(31),_=a.n(L),U=function(e){Object(I.a)(a,e);var t=Object(R.a)(a);function a(){return Object(A.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement(i.b,{to:"/settings"},r.a.createElement("button",{type:"button","data-testid":"btn-settings",className:"btn-settings"},r.a.createElement("img",{className:"settings-icon",src:_.a,alt:"Configura\xe7\xf5es"})))}}]),a}(n.Component),V=function(e){Object(I.a)(a,e);var t=Object(R.a)(a);function a(){var e;return Object(A.a)(this,a),(e=t.call(this)).state={email:"",name:""},e.handleChange=e.handleChange.bind(Object(T.a)(e)),e.toPlay=e.toPlay.bind(Object(T.a)(e)),e}return Object(x.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(N.a)({},a,n))}},{key:"toPlay",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.tokenAPI,n=t.history,r=t.setUser,c=this.state,s=c.email,i=c.name,e.next=4,a();case 4:r({email:s,name:i}),n.push("/game");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"login-trivia-logo",src:P.a,alt:"Trivia Logo"}),r.a.createElement("section",{className:"login-section"},r.a.createElement(U,null),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"emailInput"},"E-mail:",r.a.createElement("input",{id:"emailInput",name:"email",type:"email","data-testid":"input-gravatar-email",onChange:this.handleChange,value:t})),r.a.createElement("label",{htmlFor:"nameInput"},"Name:",r.a.createElement("input",{id:"nameInput",name:"name",type:"text","data-testid":"input-player-name",onChange:this.handleChange,value:a})),r.a.createElement("button",{type:"button","data-testid":"btn-play",className:"btn-play",disabled:!(a&&t),onClick:this.toPlay},"Jogar"))))}}]),a}(n.Component),Q=Object(o.b)((function(e){return{token:e.tokenReducer.token}}),(function(e){return{tokenAPI:function(){return e(function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=n.token,localStorage.setItem("token",r),e.abrupt("return",t({type:"SET_TOKEN_VALUE",payload:r}));case 12:e.prev=12,e.t0=e.catch(0),t(v(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())},setUser:function(t){return e({type:"SET_LOGIN_VALUE",payload:t})}}}))(V),J=function(e){Object(I.a)(a,e);var t=Object(R.a)(a);function a(){return Object(A.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",{"data-testid":"settings-title"}," Configura\xe7\xf5es "))}}]),a}(n.Component),M=a(23),D=(a(51),a(33)),G=a.n(D),F=(a(54),function(e){Object(I.a)(a,e);var t=Object(R.a)(a);function a(){var e;return Object(A.a)(this,a),(e=t.call(this)).state={picture:""},e.getGravatarPicture=e.getGravatarPicture.bind(Object(T.a)(e)),e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.getGravatarPicture()}},{key:"getGravatarPicture",value:function(){var e=this.props.email,t=G()(e).toString(),a="https://www.gravatar.com/avatar/".concat(t);this.setState({picture:a})}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=this.state.picture;return r.a.createElement("section",{className:"top-container"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{className:"trivia-logo",src:P.a,alt:"Trivia Logo"})),r.a.createElement("header",null,r.a.createElement("div",{className:"user-info"},r.a.createElement("img",{"data-testid":"header-profile-picture",className:"header-profile-picture",src:n,alt:"profile"}),r.a.createElement("span",{className:"player-name"},"Jogador:"," ",r.a.createElement("span",{"data-testid":"header-player-name"},t))),r.a.createElement("span",{className:"player-score"},"Pontos:"," ",r.a.createElement("span",{"data-testid":"header-score"},a)),r.a.createElement(U,null)))}}]),a}(n.Component)),W=Object(o.b)((function(e){return{name:e.loginReducer.name,email:e.loginReducer.email}}))(F),B=function(e){Object(I.a)(a,e);var t=Object(R.a)(a);function a(){return Object(A.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.results;return r.a.createElement("section",{className:"question-card"},r.a.createElement("section",{className:"category-section"},r.a.createElement("span",{"data-testid":"question-category"},e?"Category: ".concat(e.category," "):"Category: ")),r.a.createElement("br",null),r.a.createElement("div",{"data-testid":"question-text",className:"question-text"},e?"Question: ".concat(e.question," "):"Question: "),r.a.createElement("br",null))}}]),a}(n.Component);B.defaultProps={results:void 0};a(55);var K=function(e){Object(I.a)(a,e);var t=Object(R.a)(a);function a(){return Object(A.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.answers,n=e.disabled;return r.a.createElement("section",{className:"answers-container"},a.map((function(e,a){var c=e.answer,s=e.correct;return r.a.createElement("button",{type:"button","data-testid":s?"correct-answer":"wrong-answer-".concat(a),className:"answer ".concat(s?"correct":"incorrect"),key:a,onClick:t,disabled:n},c)})))}}]),a}(n.Component);K.defaultProps={answers:[]};var $=function(e){Object(I.a)(a,e);var t=Object(R.a)(a);function a(e){var n;Object(A.a)(this,a),n=t.call(this,e);var r=e.email,c=e.name;return n.state={answers:[],counter:0,timer:30,state:{player:{name:c,assertions:0,score:0,gravatarEmail:r}}},n.gameTimer=null,n.handleCounter=n.handleCounter.bind(Object(T.a)(n)),n.shuffleArray=n.shuffleArray.bind(Object(T.a)(n)),n.getAnswers=n.getAnswers.bind(Object(T.a)(n)),n.handleQuestionTimer=n.handleQuestionTimer.bind(Object(T.a)(n)),n.handleAnswerClick=n.handleAnswerClick.bind(Object(T.a)(n)),n.handleCorrectChange=n.handleCorrectChange.bind(Object(T.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.triviaApi,a=this.state.state;t().then((function(){return e.getAnswers()})),this.handleQuestionTimer(),localStorage.setItem("state",JSON.stringify(a))}},{key:"componentDidUpdate",value:function(){var e=this.state.state;localStorage.setItem("state",JSON.stringify(e))}},{key:"componentWillUnmount",value:function(){var e=this.state.timer;clearInterval(e)}},{key:"getAnswers",value:function(){var e=this,t=this.props.triviaReturn.results.reduce((function(t,a){var n=a.incorrect_answers.map((function(e){return{answer:e,correct:!1}})),r=[{answer:a.correct_answer,correct:!0}].concat(Object(M.a)(n)),c=e.shuffleArray(r);return t.push(c),t}),[]);this.setState({answers:t})}},{key:"shuffleArray",value:function(e){for(var t,a=e.length;0!==a;){t=Math.floor(Math.random()*a),a-=1;var n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}return e}},{key:"handleQuestionTimer",value:function(){var e=this,t=31;return this.gameTimer=setInterval((function(){t>0&&(t-=1,e.setState({timer:t}))}),1e3),t}},{key:"handleCorrectChange",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,c,s,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state,a=t.timer,n=t.counter,r=this.props,c=r.triviaReturn.results,s=r.email,i=r.name,o=0,"easy"===c[n].difficulty&&(o=1),"medium"===c[n].difficulty&&(o=2),"hard"===c[n].difficulty&&(3,o=3),10,this.setState((function(e){return{state:{player:{name:i,assertions:e.state.player.assertions+1,score:e.state.player.score+(10+a*o),gravatarEmail:s}}}}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAnswerClick",value:function(e){var t=e.target,a=null!==document.querySelector(".clicked"),n=document.querySelectorAll(".answer");document.querySelector(".next-question-btn").classList.add("visible"),a||Object(M.a)(n).forEach((function(e){return e.classList.add("clicked")})),t.classList.contains("correct")&&this.handleCorrectChange()}},{key:"handleCounter",value:function(){var e=this.state.counter,t=this.props.history,a=document.querySelector(".question-card"),n=document.querySelector(".answers-container"),r=document.querySelectorAll(".answer");4===e&&t.push("/feedback"),document.querySelector(".next-question-btn").classList.remove("visible"),a.style.display="none",n.style.display="none",this.setState((function(e){return{counter:e.counter+1}})),clearInterval(this.gameTimer),this.handleQuestionTimer(),setTimeout((function(){a.style.display="block",n.style.display="flex",Object(M.a)(r).forEach((function(e){return e.classList.remove("clicked")}))}),100)}},{key:"render",value:function(){var e=this.state,t=e.counter,a=e.timer,n=e.answers,c=e.state,s=this.props.triviaReturn.results;return r.a.createElement("section",null,r.a.createElement(W,{score:c.player.score}),r.a.createElement("section",{className:"content-container"},r.a.createElement(B,{results:s?s[t]:{}}),r.a.createElement(K,{answers:n[t],disabled:0===a,onClick:this.handleAnswerClick})),r.a.createElement("section",{className:"bottom-container"},r.a.createElement("span",null,"Tempo restante: ".concat(a,a<=1?" segundo":" segundos")),r.a.createElement("button",{type:"button",className:"next-question-btn","data-testid":"btn-next",onClick:this.handleCounter},"Pr\xf3xima")))}}]),a}(n.Component),z=Object(o.b)((function(e){return{triviaReturn:e.gameReducer.triviaReturn,email:e.loginReducer.email,name:e.loginReducer.name}}),(function(e){return{triviaApi:function(){return e(function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage,n=a.token,e.next=4,fetch("https://opentdb.com/api.php?amount=5&token=".concat(n));case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",t({type:"SET_TRIVIA_VALUE",payload:c}));case 11:e.prev=11,e.t0=e.catch(0),t(v(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}}}))($),H=(a(56),function(e){Object(I.a)(a,e);var t=Object(R.a)(a);function a(){var e;return Object(A.a)(this,a),(e=t.call(this)).state={state:{player:{assertions:0,score:0}}},e.getState=e.getState.bind(Object(T.a)(e)),e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.getState()}},{key:"getState",value:function(){var e=JSON.parse(localStorage.getItem("state"));this.setState({state:e})}},{key:"render",value:function(){var e=this.state.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{score:e.player.score}),r.a.createElement("main",{className:"feedback-container"},r.a.createElement("section",{className:"result-header"},r.a.createElement("p",null,"Resultado")),r.a.createElement("p",null,"Voc\xea acertou",r.a.createElement("span",{"data-testid":"feedback-total-question"}," ".concat(e.player.assertions," ")),"perguntas"),r.a.createElement("p",null,r.a.createElement("span",{"data-testid":"feedback-total-score"},"".concat(e.player.score," ")),"Pontos"),r.a.createElement("p",{className:"feedback-text","data-testid":"feedback-text"},e.player.assertions>=3?"Mandou bem!":"Podia ser melhor..."),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again",className:"btn-play"},"Play again!"))))}}]),a}(n.Component));function X(){return r.a.createElement(S.c,null,r.a.createElement(S.a,{exact:!0,path:"/",component:Q}),r.a.createElement(S.a,{path:"/settings",component:J}),r.a.createElement(S.a,{path:"/game",component:z}),r.a.createElement(S.a,{path:"/feedback",component:H}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:C},r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.511d148e.chunk.js.map